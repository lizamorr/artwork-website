{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _aphrodite = require('aphrodite');\n\nvar _reactScrolllock = require('react-scrolllock');\n\nvar _reactScrolllock2 = _interopRequireDefault(_reactScrolllock);\n\nvar _theme = require('./theme');\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nvar _Arrow = require('./components/Arrow');\n\nvar _Arrow2 = _interopRequireDefault(_Arrow);\n\nvar _Container = require('./components/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Footer = require('./components/Footer');\n\nvar _Footer2 = _interopRequireDefault(_Footer);\n\nvar _Header = require('./components/Header');\n\nvar _Header2 = _interopRequireDefault(_Header);\n\nvar _PaginatedThumbnails = require('./components/PaginatedThumbnails');\n\nvar _PaginatedThumbnails2 = _interopRequireDefault(_PaginatedThumbnails);\n\nvar _Portal = require('./components/Portal');\n\nvar _Portal2 = _interopRequireDefault(_Portal);\n\nvar _Spinner = require('./components/Spinner');\n\nvar _Spinner2 = _interopRequireDefault(_Spinner);\n\nvar _bindFunctions = require('./utils/bindFunctions');\n\nvar _bindFunctions2 = _interopRequireDefault(_bindFunctions);\n\nvar _canUseDom = require('./utils/canUseDom');\n\nvar _canUseDom2 = _interopRequireDefault(_canUseDom);\n\nvar _deepMerge = require('./utils/deepMerge');\n\nvar _deepMerge2 = _interopRequireDefault(_deepMerge);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // consumers sometimes provide incorrect type or casing\n\n\nfunction normalizeSourceSet(data) {\n  var sourceSet = data.srcSet || data.srcset;\n\n  if (Array.isArray(sourceSet)) {\n    return sourceSet.join();\n  }\n\n  return sourceSet;\n}\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox(props) {\n    _classCallCheck(this, Lightbox);\n\n    var _this = _possibleConstructorReturn(this, (Lightbox.__proto__ || Object.getPrototypeOf(Lightbox)).call(this, props));\n\n    _this.theme = (0, _deepMerge2.default)(_theme2.default, props.theme);\n    _this.classes = _aphrodite.StyleSheet.create((0, _deepMerge2.default)(defaultStyles, _this.theme));\n    _this.state = {\n      imageLoaded: false\n    };\n\n    _bindFunctions2.default.call(_this, ['gotoNext', 'gotoPrev', 'closeBackdrop', 'handleKeyboardInput', 'handleImageLoaded']);\n\n    return _this;\n  }\n\n  _createClass(Lightbox, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        theme: this.theme\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        if (this.props.enableKeyboardInput) {\n          window.addEventListener('keydown', this.handleKeyboardInput);\n        }\n\n        if (typeof this.props.currentImage === 'number') {\n          this.preloadImage(this.props.currentImage, this.handleImageLoaded);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (!_canUseDom2.default) return; // preload images\n\n      if (nextProps.preloadNextImage) {\n        var currentIndex = this.props.currentImage;\n        var nextIndex = nextProps.currentImage + 1;\n        var prevIndex = nextProps.currentImage - 1;\n        var preloadIndex = void 0;\n\n        if (currentIndex && nextProps.currentImage > currentIndex) {\n          preloadIndex = nextIndex;\n        } else if (currentIndex && nextProps.currentImage < currentIndex) {\n          preloadIndex = prevIndex;\n        } // if we know the user's direction just get one image\n        // otherwise, to be safe, we need to grab one in each direction\n\n\n        if (preloadIndex) {\n          this.preloadImage(preloadIndex);\n        } else {\n          this.preloadImage(prevIndex);\n          this.preloadImage(nextIndex);\n        }\n      } // preload current image\n\n\n      if (this.props.currentImage !== nextProps.currentImage || !this.props.isOpen && nextProps.isOpen) {\n        var img = this.preloadImageData(nextProps.images[nextProps.currentImage], this.handleImageLoaded);\n        if (img) this.setState({\n          imageLoaded: img.complete\n        });\n      } // add/remove event listeners\n\n\n      if (!this.props.isOpen && nextProps.isOpen && nextProps.enableKeyboardInput) {\n        window.addEventListener('keydown', this.handleKeyboardInput);\n      }\n\n      if (!nextProps.isOpen && nextProps.enableKeyboardInput) {\n        window.removeEventListener('keydown', this.handleKeyboardInput);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.enableKeyboardInput) {\n        window.removeEventListener('keydown', this.handleKeyboardInput);\n      }\n    } // ==============================\n    // METHODS\n    // ==============================\n\n  }, {\n    key: 'preloadImage',\n    value: function preloadImage(idx, onload) {\n      return this.preloadImageData(this.props.images[idx], onload);\n    }\n  }, {\n    key: 'preloadImageData',\n    value: function preloadImageData(data, onload) {\n      if (!data) return;\n      var img = new Image();\n      var sourceSet = normalizeSourceSet(data); // TODO: add error handling for missing images\n\n      img.onerror = onload;\n      img.onload = onload;\n      img.src = data.src;\n      if (sourceSet) img.srcset = sourceSet;\n      return img;\n    }\n  }, {\n    key: 'gotoNext',\n    value: function gotoNext(event) {\n      var _props = this.props,\n          currentImage = _props.currentImage,\n          images = _props.images;\n      var imageLoaded = this.state.imageLoaded;\n      if (!imageLoaded || currentImage === images.length - 1) return;\n\n      if (event) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      this.props.onClickNext();\n    }\n  }, {\n    key: 'gotoPrev',\n    value: function gotoPrev(event) {\n      var currentImage = this.props.currentImage;\n      var imageLoaded = this.state.imageLoaded;\n      if (!imageLoaded || currentImage === 0) return;\n\n      if (event) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      this.props.onClickPrev();\n    }\n  }, {\n    key: 'closeBackdrop',\n    value: function closeBackdrop(event) {\n      // make sure event only happens if they click the backdrop\n      // and if the caption is widening the figure element let that respond too\n      if (event.target.id === 'lightboxBackdrop' || event.target.tagName === 'FIGURE') {\n        this.props.onClose();\n      }\n    }\n  }, {\n    key: 'handleKeyboardInput',\n    value: function handleKeyboardInput(event) {\n      if (event.keyCode === 37) {\n        // left\n        this.gotoPrev(event);\n        return true;\n      } else if (event.keyCode === 39) {\n        // right\n        this.gotoNext(event);\n        return true;\n      } else if (event.keyCode === 27) {\n        // esc\n        this.props.onClose();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'handleImageLoaded',\n    value: function handleImageLoaded() {\n      this.setState({\n        imageLoaded: true\n      });\n    } // ==============================\n    // RENDERERS\n    // ==============================\n\n  }, {\n    key: 'renderArrowPrev',\n    value: function renderArrowPrev() {\n      if (this.props.currentImage === 0) return null;\n      return _react2.default.createElement(_Arrow2.default, {\n        direction: 'left',\n        icon: 'arrowLeft',\n        onClick: this.gotoPrev,\n        title: this.props.leftArrowTitle,\n        type: 'button'\n      });\n    }\n  }, {\n    key: 'renderArrowNext',\n    value: function renderArrowNext() {\n      if (this.props.currentImage === this.props.images.length - 1) return null;\n      return _react2.default.createElement(_Arrow2.default, {\n        direction: 'right',\n        icon: 'arrowRight',\n        onClick: this.gotoNext,\n        title: this.props.rightArrowTitle,\n        type: 'button'\n      });\n    }\n  }, {\n    key: 'renderDialog',\n    value: function renderDialog() {\n      var _props2 = this.props,\n          backdropClosesModal = _props2.backdropClosesModal,\n          isOpen = _props2.isOpen,\n          showThumbnails = _props2.showThumbnails,\n          width = _props2.width;\n      var imageLoaded = this.state.imageLoaded;\n      if (!isOpen) return _react2.default.createElement('span', {\n        key: 'closed'\n      });\n      var offsetThumbnails = 0;\n\n      if (showThumbnails) {\n        offsetThumbnails = this.theme.thumbnail.size + this.theme.container.gutter.vertical;\n      }\n\n      return _react2.default.createElement(_Container2.default, {\n        key: 'open',\n        onClick: backdropClosesModal && this.closeBackdrop,\n        onTouchEnd: backdropClosesModal && this.closeBackdrop\n      }, _react2.default.createElement('div', null, _react2.default.createElement('div', {\n        className: (0, _aphrodite.css)(this.classes.content),\n        style: {\n          marginBottom: offsetThumbnails,\n          maxWidth: width\n        }\n      }, imageLoaded && this.renderHeader(), this.renderImages(), this.renderSpinner(), imageLoaded && this.renderFooter()), imageLoaded && this.renderThumbnails(), imageLoaded && this.renderArrowPrev(), imageLoaded && this.renderArrowNext(), this.props.preventScroll && _react2.default.createElement(_reactScrolllock2.default, null)));\n    }\n  }, {\n    key: 'renderImages',\n    value: function renderImages() {\n      var _props3 = this.props,\n          currentImage = _props3.currentImage,\n          images = _props3.images,\n          onClickImage = _props3.onClickImage,\n          showThumbnails = _props3.showThumbnails;\n      var imageLoaded = this.state.imageLoaded;\n      if (!images || !images.length) return null;\n      var image = images[currentImage];\n      var sourceSet = normalizeSourceSet(image);\n      var sizes = sourceSet ? '100vw' : null;\n      var thumbnailsSize = showThumbnails ? this.theme.thumbnail.size : 0;\n      var heightOffset = this.theme.header.height + this.theme.footer.height + thumbnailsSize + this.theme.container.gutter.vertical + 'px';\n      return _react2.default.createElement('figure', {\n        className: (0, _aphrodite.css)(this.classes.figure)\n      }, _react2.default.createElement('img', {\n        className: (0, _aphrodite.css)(this.classes.image, imageLoaded && this.classes.imageLoaded),\n        onClick: onClickImage,\n        sizes: sizes,\n        alt: image.alt,\n        src: image.src,\n        srcSet: sourceSet,\n        style: {\n          cursor: onClickImage ? 'pointer' : 'auto',\n          maxHeight: 'calc(100vh - ' + heightOffset + ')'\n        }\n      }));\n    }\n  }, {\n    key: 'renderThumbnails',\n    value: function renderThumbnails() {\n      var _props4 = this.props,\n          images = _props4.images,\n          currentImage = _props4.currentImage,\n          onClickThumbnail = _props4.onClickThumbnail,\n          showThumbnails = _props4.showThumbnails,\n          thumbnailOffset = _props4.thumbnailOffset;\n      if (!showThumbnails) return;\n      return _react2.default.createElement(_PaginatedThumbnails2.default, {\n        currentImage: currentImage,\n        images: images,\n        offset: thumbnailOffset,\n        onClickThumbnail: onClickThumbnail\n      });\n    }\n  }, {\n    key: 'renderHeader',\n    value: function renderHeader() {\n      var _props5 = this.props,\n          closeButtonTitle = _props5.closeButtonTitle,\n          customControls = _props5.customControls,\n          onClose = _props5.onClose,\n          showCloseButton = _props5.showCloseButton;\n      return _react2.default.createElement(_Header2.default, {\n        customControls: customControls,\n        onClose: onClose,\n        showCloseButton: showCloseButton,\n        closeButtonTitle: closeButtonTitle\n      });\n    }\n  }, {\n    key: 'renderFooter',\n    value: function renderFooter() {\n      var _props6 = this.props,\n          currentImage = _props6.currentImage,\n          images = _props6.images,\n          imageCountSeparator = _props6.imageCountSeparator,\n          showImageCount = _props6.showImageCount;\n      if (!images || !images.length) return null;\n      return _react2.default.createElement(_Footer2.default, {\n        caption: images[currentImage].caption,\n        countCurrent: currentImage + 1,\n        countSeparator: imageCountSeparator,\n        countTotal: images.length,\n        showCount: showImageCount\n      });\n    }\n  }, {\n    key: 'renderSpinner',\n    value: function renderSpinner() {\n      var _props7 = this.props,\n          spinner = _props7.spinner,\n          spinnerColor = _props7.spinnerColor,\n          spinnerSize = _props7.spinnerSize;\n      var imageLoaded = this.state.imageLoaded;\n      var Spinner = spinner;\n      return _react2.default.createElement('div', {\n        className: (0, _aphrodite.css)(this.classes.spinner, !imageLoaded && this.classes.spinnerActive)\n      }, _react2.default.createElement(Spinner, {\n        color: spinnerColor,\n        size: spinnerSize\n      }));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(_Portal2.default, null, this.renderDialog());\n    }\n  }]);\n\n  return Lightbox;\n}(_react.Component);\n\nLightbox.propTypes = {\n  backdropClosesModal: _propTypes2.default.bool,\n  closeButtonTitle: _propTypes2.default.string,\n  currentImage: _propTypes2.default.number,\n  customControls: _propTypes2.default.arrayOf(_propTypes2.default.node),\n  enableKeyboardInput: _propTypes2.default.bool,\n  imageCountSeparator: _propTypes2.default.string,\n  images: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    src: _propTypes2.default.string.isRequired,\n    srcSet: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.string)]),\n    caption: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.element]),\n    thumbnail: _propTypes2.default.string\n  })).isRequired,\n  isOpen: _propTypes2.default.bool,\n  leftArrowTitle: _propTypes2.default.string,\n  onClickImage: _propTypes2.default.func,\n  onClickNext: _propTypes2.default.func,\n  onClickPrev: _propTypes2.default.func,\n  onClose: _propTypes2.default.func.isRequired,\n  preloadNextImage: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  rightArrowTitle: _propTypes2.default.string,\n  showCloseButton: _propTypes2.default.bool,\n  showImageCount: _propTypes2.default.bool,\n  showThumbnails: _propTypes2.default.bool,\n  spinner: _propTypes2.default.func,\n  spinnerColor: _propTypes2.default.string,\n  spinnerSize: _propTypes2.default.number,\n  theme: _propTypes2.default.object,\n  thumbnailOffset: _propTypes2.default.number,\n  width: _propTypes2.default.number\n};\nLightbox.defaultProps = {\n  closeButtonTitle: 'Close (Esc)',\n  currentImage: 0,\n  enableKeyboardInput: true,\n  imageCountSeparator: ' of ',\n  leftArrowTitle: 'Previous (Left arrow key)',\n  onClickShowNextImage: true,\n  preloadNextImage: true,\n  preventScroll: true,\n  rightArrowTitle: 'Next (Right arrow key)',\n  showCloseButton: true,\n  showImageCount: true,\n  spinner: _Spinner2.default,\n  spinnerColor: 'white',\n  spinnerSize: 100,\n  theme: {},\n  thumbnailOffset: 2,\n  width: 1024\n};\nLightbox.childContextTypes = {\n  theme: _propTypes2.default.object.isRequired\n};\nvar defaultStyles = {\n  content: {\n    position: 'relative'\n  },\n  figure: {\n    margin: 0 // remove browser default\n\n  },\n  image: {\n    display: 'block',\n    // removes browser default gutter\n    height: 'auto',\n    margin: '0 auto',\n    // maintain center on very short screens OR very narrow image\n    maxWidth: '100%',\n    // disable user select\n    WebkitTouchCallout: 'none',\n    userSelect: 'none',\n    // opacity animation on image load\n    opacity: 0,\n    transition: 'opacity 0.3s'\n  },\n  imageLoaded: {\n    opacity: 1\n  },\n  spinner: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    // opacity animation to make spinner appear with delay\n    opacity: 0,\n    transition: 'opacity 0.3s',\n    pointerEvents: 'none'\n  },\n  spinnerActive: {\n    opacity: 1\n  }\n};\nexports.default = Lightbox;","map":{"version":3,"sources":["/Users/liza/Documents/GitHub/artwork-website/art/node_modules/react-images/lib/Lightbox.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_propTypes","require","_propTypes2","_interopRequireDefault","_react","_react2","_aphrodite","_reactScrolllock","_reactScrolllock2","_theme","_theme2","_Arrow","_Arrow2","_Container","_Container2","_Footer","_Footer2","_Header","_Header2","_PaginatedThumbnails","_PaginatedThumbnails2","_Portal","_Portal2","_Spinner","_Spinner2","_bindFunctions","_bindFunctions2","_canUseDom","_canUseDom2","_deepMerge","_deepMerge2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","normalizeSourceSet","data","sourceSet","srcSet","srcset","Array","isArray","join","Lightbox","_Component","_this","getPrototypeOf","theme","classes","StyleSheet","defaultStyles","state","imageLoaded","getChildContext","componentDidMount","isOpen","enableKeyboardInput","window","addEventListener","handleKeyboardInput","currentImage","preloadImage","handleImageLoaded","componentWillReceiveProps","nextProps","preloadNextImage","currentIndex","nextIndex","prevIndex","preloadIndex","img","preloadImageData","images","setState","complete","removeEventListener","componentWillUnmount","idx","onload","Image","onerror","src","gotoNext","event","_props","preventDefault","stopPropagation","onClickNext","gotoPrev","onClickPrev","closeBackdrop","id","tagName","onClose","keyCode","renderArrowPrev","createElement","direction","icon","onClick","title","leftArrowTitle","type","renderArrowNext","rightArrowTitle","renderDialog","_props2","backdropClosesModal","showThumbnails","width","offsetThumbnails","thumbnail","size","container","gutter","vertical","onTouchEnd","className","css","content","style","marginBottom","maxWidth","renderHeader","renderImages","renderSpinner","renderFooter","renderThumbnails","preventScroll","_props3","onClickImage","image","sizes","thumbnailsSize","heightOffset","header","height","footer","figure","alt","cursor","maxHeight","_props4","onClickThumbnail","thumbnailOffset","offset","_props5","closeButtonTitle","customControls","showCloseButton","_props6","imageCountSeparator","showImageCount","caption","countCurrent","countSeparator","countTotal","showCount","_props7","spinner","spinnerColor","spinnerSize","Spinner","spinnerActive","color","render","Component","propTypes","bool","string","number","arrayOf","node","shape","isRequired","oneOfType","element","func","object","defaultProps","onClickShowNextImage","childContextTypes","position","margin","display","WebkitTouchCallout","userSelect","opacity","transition","top","left","transform","pointerEvents"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _aphrodite = require('aphrodite');\n\nvar _reactScrolllock = require('react-scrolllock');\n\nvar _reactScrolllock2 = _interopRequireDefault(_reactScrolllock);\n\nvar _theme = require('./theme');\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nvar _Arrow = require('./components/Arrow');\n\nvar _Arrow2 = _interopRequireDefault(_Arrow);\n\nvar _Container = require('./components/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Footer = require('./components/Footer');\n\nvar _Footer2 = _interopRequireDefault(_Footer);\n\nvar _Header = require('./components/Header');\n\nvar _Header2 = _interopRequireDefault(_Header);\n\nvar _PaginatedThumbnails = require('./components/PaginatedThumbnails');\n\nvar _PaginatedThumbnails2 = _interopRequireDefault(_PaginatedThumbnails);\n\nvar _Portal = require('./components/Portal');\n\nvar _Portal2 = _interopRequireDefault(_Portal);\n\nvar _Spinner = require('./components/Spinner');\n\nvar _Spinner2 = _interopRequireDefault(_Spinner);\n\nvar _bindFunctions = require('./utils/bindFunctions');\n\nvar _bindFunctions2 = _interopRequireDefault(_bindFunctions);\n\nvar _canUseDom = require('./utils/canUseDom');\n\nvar _canUseDom2 = _interopRequireDefault(_canUseDom);\n\nvar _deepMerge = require('./utils/deepMerge');\n\nvar _deepMerge2 = _interopRequireDefault(_deepMerge);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// consumers sometimes provide incorrect type or casing\nfunction normalizeSourceSet(data) {\n\tvar sourceSet = data.srcSet || data.srcset;\n\n\tif (Array.isArray(sourceSet)) {\n\t\treturn sourceSet.join();\n\t}\n\n\treturn sourceSet;\n}\n\nvar Lightbox = function (_Component) {\n\t_inherits(Lightbox, _Component);\n\n\tfunction Lightbox(props) {\n\t\t_classCallCheck(this, Lightbox);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Lightbox.__proto__ || Object.getPrototypeOf(Lightbox)).call(this, props));\n\n\t\t_this.theme = (0, _deepMerge2.default)(_theme2.default, props.theme);\n\t\t_this.classes = _aphrodite.StyleSheet.create((0, _deepMerge2.default)(defaultStyles, _this.theme));\n\t\t_this.state = { imageLoaded: false };\n\n\t\t_bindFunctions2.default.call(_this, ['gotoNext', 'gotoPrev', 'closeBackdrop', 'handleKeyboardInput', 'handleImageLoaded']);\n\t\treturn _this;\n\t}\n\n\t_createClass(Lightbox, [{\n\t\tkey: 'getChildContext',\n\t\tvalue: function getChildContext() {\n\t\t\treturn {\n\t\t\t\ttheme: this.theme\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'componentDidMount',\n\t\tvalue: function componentDidMount() {\n\t\t\tif (this.props.isOpen) {\n\t\t\t\tif (this.props.enableKeyboardInput) {\n\t\t\t\t\twindow.addEventListener('keydown', this.handleKeyboardInput);\n\t\t\t\t}\n\t\t\t\tif (typeof this.props.currentImage === 'number') {\n\t\t\t\t\tthis.preloadImage(this.props.currentImage, this.handleImageLoaded);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'componentWillReceiveProps',\n\t\tvalue: function componentWillReceiveProps(nextProps) {\n\t\t\tif (!_canUseDom2.default) return;\n\n\t\t\t// preload images\n\t\t\tif (nextProps.preloadNextImage) {\n\t\t\t\tvar currentIndex = this.props.currentImage;\n\t\t\t\tvar nextIndex = nextProps.currentImage + 1;\n\t\t\t\tvar prevIndex = nextProps.currentImage - 1;\n\t\t\t\tvar preloadIndex = void 0;\n\n\t\t\t\tif (currentIndex && nextProps.currentImage > currentIndex) {\n\t\t\t\t\tpreloadIndex = nextIndex;\n\t\t\t\t} else if (currentIndex && nextProps.currentImage < currentIndex) {\n\t\t\t\t\tpreloadIndex = prevIndex;\n\t\t\t\t}\n\n\t\t\t\t// if we know the user's direction just get one image\n\t\t\t\t// otherwise, to be safe, we need to grab one in each direction\n\t\t\t\tif (preloadIndex) {\n\t\t\t\t\tthis.preloadImage(preloadIndex);\n\t\t\t\t} else {\n\t\t\t\t\tthis.preloadImage(prevIndex);\n\t\t\t\t\tthis.preloadImage(nextIndex);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// preload current image\n\t\t\tif (this.props.currentImage !== nextProps.currentImage || !this.props.isOpen && nextProps.isOpen) {\n\t\t\t\tvar img = this.preloadImageData(nextProps.images[nextProps.currentImage], this.handleImageLoaded);\n\t\t\t\tif (img) this.setState({ imageLoaded: img.complete });\n\t\t\t}\n\n\t\t\t// add/remove event listeners\n\t\t\tif (!this.props.isOpen && nextProps.isOpen && nextProps.enableKeyboardInput) {\n\t\t\t\twindow.addEventListener('keydown', this.handleKeyboardInput);\n\t\t\t}\n\t\t\tif (!nextProps.isOpen && nextProps.enableKeyboardInput) {\n\t\t\t\twindow.removeEventListener('keydown', this.handleKeyboardInput);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'componentWillUnmount',\n\t\tvalue: function componentWillUnmount() {\n\t\t\tif (this.props.enableKeyboardInput) {\n\t\t\t\twindow.removeEventListener('keydown', this.handleKeyboardInput);\n\t\t\t}\n\t\t}\n\n\t\t// ==============================\n\t\t// METHODS\n\t\t// ==============================\n\n\t}, {\n\t\tkey: 'preloadImage',\n\t\tvalue: function preloadImage(idx, onload) {\n\t\t\treturn this.preloadImageData(this.props.images[idx], onload);\n\t\t}\n\t}, {\n\t\tkey: 'preloadImageData',\n\t\tvalue: function preloadImageData(data, onload) {\n\t\t\tif (!data) return;\n\t\t\tvar img = new Image();\n\t\t\tvar sourceSet = normalizeSourceSet(data);\n\n\t\t\t// TODO: add error handling for missing images\n\t\t\timg.onerror = onload;\n\t\t\timg.onload = onload;\n\t\t\timg.src = data.src;\n\n\t\t\tif (sourceSet) img.srcset = sourceSet;\n\n\t\t\treturn img;\n\t\t}\n\t}, {\n\t\tkey: 'gotoNext',\n\t\tvalue: function gotoNext(event) {\n\t\t\tvar _props = this.props,\n\t\t\t    currentImage = _props.currentImage,\n\t\t\t    images = _props.images;\n\t\t\tvar imageLoaded = this.state.imageLoaded;\n\n\n\t\t\tif (!imageLoaded || currentImage === images.length - 1) return;\n\n\t\t\tif (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t\tthis.props.onClickNext();\n\t\t}\n\t}, {\n\t\tkey: 'gotoPrev',\n\t\tvalue: function gotoPrev(event) {\n\t\t\tvar currentImage = this.props.currentImage;\n\t\t\tvar imageLoaded = this.state.imageLoaded;\n\n\n\t\t\tif (!imageLoaded || currentImage === 0) return;\n\n\t\t\tif (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t\tthis.props.onClickPrev();\n\t\t}\n\t}, {\n\t\tkey: 'closeBackdrop',\n\t\tvalue: function closeBackdrop(event) {\n\t\t\t// make sure event only happens if they click the backdrop\n\t\t\t// and if the caption is widening the figure element let that respond too\n\t\t\tif (event.target.id === 'lightboxBackdrop' || event.target.tagName === 'FIGURE') {\n\t\t\t\tthis.props.onClose();\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'handleKeyboardInput',\n\t\tvalue: function handleKeyboardInput(event) {\n\t\t\tif (event.keyCode === 37) {\n\t\t\t\t// left\n\t\t\t\tthis.gotoPrev(event);\n\t\t\t\treturn true;\n\t\t\t} else if (event.keyCode === 39) {\n\t\t\t\t// right\n\t\t\t\tthis.gotoNext(event);\n\t\t\t\treturn true;\n\t\t\t} else if (event.keyCode === 27) {\n\t\t\t\t// esc\n\t\t\t\tthis.props.onClose();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}, {\n\t\tkey: 'handleImageLoaded',\n\t\tvalue: function handleImageLoaded() {\n\t\t\tthis.setState({ imageLoaded: true });\n\t\t}\n\n\t\t// ==============================\n\t\t// RENDERERS\n\t\t// ==============================\n\n\t}, {\n\t\tkey: 'renderArrowPrev',\n\t\tvalue: function renderArrowPrev() {\n\t\t\tif (this.props.currentImage === 0) return null;\n\n\t\t\treturn _react2.default.createElement(_Arrow2.default, {\n\t\t\t\tdirection: 'left',\n\t\t\t\ticon: 'arrowLeft',\n\t\t\t\tonClick: this.gotoPrev,\n\t\t\t\ttitle: this.props.leftArrowTitle,\n\t\t\t\ttype: 'button'\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'renderArrowNext',\n\t\tvalue: function renderArrowNext() {\n\t\t\tif (this.props.currentImage === this.props.images.length - 1) return null;\n\n\t\t\treturn _react2.default.createElement(_Arrow2.default, {\n\t\t\t\tdirection: 'right',\n\t\t\t\ticon: 'arrowRight',\n\t\t\t\tonClick: this.gotoNext,\n\t\t\t\ttitle: this.props.rightArrowTitle,\n\t\t\t\ttype: 'button'\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'renderDialog',\n\t\tvalue: function renderDialog() {\n\t\t\tvar _props2 = this.props,\n\t\t\t    backdropClosesModal = _props2.backdropClosesModal,\n\t\t\t    isOpen = _props2.isOpen,\n\t\t\t    showThumbnails = _props2.showThumbnails,\n\t\t\t    width = _props2.width;\n\t\t\tvar imageLoaded = this.state.imageLoaded;\n\n\n\t\t\tif (!isOpen) return _react2.default.createElement('span', { key: 'closed' });\n\n\t\t\tvar offsetThumbnails = 0;\n\t\t\tif (showThumbnails) {\n\t\t\t\toffsetThumbnails = this.theme.thumbnail.size + this.theme.container.gutter.vertical;\n\t\t\t}\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_Container2.default,\n\t\t\t\t{\n\t\t\t\t\tkey: 'open',\n\t\t\t\t\tonClick: backdropClosesModal && this.closeBackdrop,\n\t\t\t\t\tonTouchEnd: backdropClosesModal && this.closeBackdrop\n\t\t\t\t},\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\tnull,\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: (0, _aphrodite.css)(this.classes.content), style: { marginBottom: offsetThumbnails, maxWidth: width } },\n\t\t\t\t\t\timageLoaded && this.renderHeader(),\n\t\t\t\t\t\tthis.renderImages(),\n\t\t\t\t\t\tthis.renderSpinner(),\n\t\t\t\t\t\timageLoaded && this.renderFooter()\n\t\t\t\t\t),\n\t\t\t\t\timageLoaded && this.renderThumbnails(),\n\t\t\t\t\timageLoaded && this.renderArrowPrev(),\n\t\t\t\t\timageLoaded && this.renderArrowNext(),\n\t\t\t\t\tthis.props.preventScroll && _react2.default.createElement(_reactScrolllock2.default, null)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}, {\n\t\tkey: 'renderImages',\n\t\tvalue: function renderImages() {\n\t\t\tvar _props3 = this.props,\n\t\t\t    currentImage = _props3.currentImage,\n\t\t\t    images = _props3.images,\n\t\t\t    onClickImage = _props3.onClickImage,\n\t\t\t    showThumbnails = _props3.showThumbnails;\n\t\t\tvar imageLoaded = this.state.imageLoaded;\n\n\n\t\t\tif (!images || !images.length) return null;\n\n\t\t\tvar image = images[currentImage];\n\t\t\tvar sourceSet = normalizeSourceSet(image);\n\t\t\tvar sizes = sourceSet ? '100vw' : null;\n\n\t\t\tvar thumbnailsSize = showThumbnails ? this.theme.thumbnail.size : 0;\n\t\t\tvar heightOffset = this.theme.header.height + this.theme.footer.height + thumbnailsSize + this.theme.container.gutter.vertical + 'px';\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t'figure',\n\t\t\t\t{ className: (0, _aphrodite.css)(this.classes.figure) },\n\t\t\t\t_react2.default.createElement('img', {\n\t\t\t\t\tclassName: (0, _aphrodite.css)(this.classes.image, imageLoaded && this.classes.imageLoaded),\n\t\t\t\t\tonClick: onClickImage,\n\t\t\t\t\tsizes: sizes,\n\t\t\t\t\talt: image.alt,\n\t\t\t\t\tsrc: image.src,\n\t\t\t\t\tsrcSet: sourceSet,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tcursor: onClickImage ? 'pointer' : 'auto',\n\t\t\t\t\t\tmaxHeight: 'calc(100vh - ' + heightOffset + ')'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}, {\n\t\tkey: 'renderThumbnails',\n\t\tvalue: function renderThumbnails() {\n\t\t\tvar _props4 = this.props,\n\t\t\t    images = _props4.images,\n\t\t\t    currentImage = _props4.currentImage,\n\t\t\t    onClickThumbnail = _props4.onClickThumbnail,\n\t\t\t    showThumbnails = _props4.showThumbnails,\n\t\t\t    thumbnailOffset = _props4.thumbnailOffset;\n\n\n\t\t\tif (!showThumbnails) return;\n\n\t\t\treturn _react2.default.createElement(_PaginatedThumbnails2.default, {\n\t\t\t\tcurrentImage: currentImage,\n\t\t\t\timages: images,\n\t\t\t\toffset: thumbnailOffset,\n\t\t\t\tonClickThumbnail: onClickThumbnail\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'renderHeader',\n\t\tvalue: function renderHeader() {\n\t\t\tvar _props5 = this.props,\n\t\t\t    closeButtonTitle = _props5.closeButtonTitle,\n\t\t\t    customControls = _props5.customControls,\n\t\t\t    onClose = _props5.onClose,\n\t\t\t    showCloseButton = _props5.showCloseButton;\n\n\n\t\t\treturn _react2.default.createElement(_Header2.default, {\n\t\t\t\tcustomControls: customControls,\n\t\t\t\tonClose: onClose,\n\t\t\t\tshowCloseButton: showCloseButton,\n\t\t\t\tcloseButtonTitle: closeButtonTitle\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'renderFooter',\n\t\tvalue: function renderFooter() {\n\t\t\tvar _props6 = this.props,\n\t\t\t    currentImage = _props6.currentImage,\n\t\t\t    images = _props6.images,\n\t\t\t    imageCountSeparator = _props6.imageCountSeparator,\n\t\t\t    showImageCount = _props6.showImageCount;\n\n\n\t\t\tif (!images || !images.length) return null;\n\n\t\t\treturn _react2.default.createElement(_Footer2.default, {\n\t\t\t\tcaption: images[currentImage].caption,\n\t\t\t\tcountCurrent: currentImage + 1,\n\t\t\t\tcountSeparator: imageCountSeparator,\n\t\t\t\tcountTotal: images.length,\n\t\t\t\tshowCount: showImageCount\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'renderSpinner',\n\t\tvalue: function renderSpinner() {\n\t\t\tvar _props7 = this.props,\n\t\t\t    spinner = _props7.spinner,\n\t\t\t    spinnerColor = _props7.spinnerColor,\n\t\t\t    spinnerSize = _props7.spinnerSize;\n\t\t\tvar imageLoaded = this.state.imageLoaded;\n\n\t\t\tvar Spinner = spinner;\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: (0, _aphrodite.css)(this.classes.spinner, !imageLoaded && this.classes.spinnerActive) },\n\t\t\t\t_react2.default.createElement(Spinner, {\n\t\t\t\t\tcolor: spinnerColor,\n\t\t\t\t\tsize: spinnerSize\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_Portal2.default,\n\t\t\t\tnull,\n\t\t\t\tthis.renderDialog()\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn Lightbox;\n}(_react.Component);\n\nLightbox.propTypes = {\n\tbackdropClosesModal: _propTypes2.default.bool,\n\tcloseButtonTitle: _propTypes2.default.string,\n\tcurrentImage: _propTypes2.default.number,\n\tcustomControls: _propTypes2.default.arrayOf(_propTypes2.default.node),\n\tenableKeyboardInput: _propTypes2.default.bool,\n\timageCountSeparator: _propTypes2.default.string,\n\timages: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n\t\tsrc: _propTypes2.default.string.isRequired,\n\t\tsrcSet: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.string)]),\n\t\tcaption: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.element]),\n\t\tthumbnail: _propTypes2.default.string\n\t})).isRequired,\n\tisOpen: _propTypes2.default.bool,\n\tleftArrowTitle: _propTypes2.default.string,\n\tonClickImage: _propTypes2.default.func,\n\tonClickNext: _propTypes2.default.func,\n\tonClickPrev: _propTypes2.default.func,\n\tonClose: _propTypes2.default.func.isRequired,\n\tpreloadNextImage: _propTypes2.default.bool,\n\tpreventScroll: _propTypes2.default.bool,\n\trightArrowTitle: _propTypes2.default.string,\n\tshowCloseButton: _propTypes2.default.bool,\n\tshowImageCount: _propTypes2.default.bool,\n\tshowThumbnails: _propTypes2.default.bool,\n\tspinner: _propTypes2.default.func,\n\tspinnerColor: _propTypes2.default.string,\n\tspinnerSize: _propTypes2.default.number,\n\ttheme: _propTypes2.default.object,\n\tthumbnailOffset: _propTypes2.default.number,\n\twidth: _propTypes2.default.number\n};\nLightbox.defaultProps = {\n\tcloseButtonTitle: 'Close (Esc)',\n\tcurrentImage: 0,\n\tenableKeyboardInput: true,\n\timageCountSeparator: ' of ',\n\tleftArrowTitle: 'Previous (Left arrow key)',\n\tonClickShowNextImage: true,\n\tpreloadNextImage: true,\n\tpreventScroll: true,\n\trightArrowTitle: 'Next (Right arrow key)',\n\tshowCloseButton: true,\n\tshowImageCount: true,\n\tspinner: _Spinner2.default,\n\tspinnerColor: 'white',\n\tspinnerSize: 100,\n\ttheme: {},\n\tthumbnailOffset: 2,\n\twidth: 1024\n};\nLightbox.childContextTypes = {\n\ttheme: _propTypes2.default.object.isRequired\n};\n\nvar defaultStyles = {\n\tcontent: {\n\t\tposition: 'relative'\n\t},\n\tfigure: {\n\t\tmargin: 0 // remove browser default\n\t},\n\timage: {\n\t\tdisplay: 'block', // removes browser default gutter\n\t\theight: 'auto',\n\t\tmargin: '0 auto', // maintain center on very short screens OR very narrow image\n\t\tmaxWidth: '100%',\n\n\t\t// disable user select\n\t\tWebkitTouchCallout: 'none',\n\t\tuserSelect: 'none',\n\n\t\t// opacity animation on image load\n\t\topacity: 0,\n\t\ttransition: 'opacity 0.3s'\n\t},\n\timageLoaded: {\n\t\topacity: 1\n\t},\n\tspinner: {\n\t\tposition: 'absolute',\n\t\ttop: '50%',\n\t\tleft: '50%',\n\t\ttransform: 'translate(-50%, -50%)',\n\n\t\t// opacity animation to make spinner appear with delay\n\t\topacity: 0,\n\t\ttransition: 'opacity 0.3s',\n\t\tpointerEvents: 'none'\n\t},\n\tspinnerActive: {\n\t\topacity: 1\n\t}\n};\n\nexports.default = Lightbox;"]},"metadata":{},"sourceType":"script"}